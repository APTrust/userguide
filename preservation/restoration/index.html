
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../recovery/">
      
      
        <link rel="next" href="../deletion/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.27">
    
    
      
        <title>Restoration - APTrust User Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#restoration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="APTrust User Guide" class="md-header__button md-logo" aria-label="APTrust User Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            APTrust User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Restoration
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/APTrust/userguide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="APTrust User Guide" class="md-nav__button md-logo" aria-label="APTrust User Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    APTrust User Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/APTrust/userguide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Preservation Actions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Preservation Actions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ingest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Updates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../moving/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Moving
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recovery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Recovery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Restoration
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Restoration
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#restoring-intellectual-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Restoring Intellectual Objects
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Restoring Intellectual Objects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes-on-restored-bags" class="md-nav__link">
    <span class="md-ellipsis">
      Notes on Restored Bags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restoring-individual-files" class="md-nav__link">
    <span class="md-ellipsis">
      Restoring Individual Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restoration-timeline" class="md-nav__link">
    <span class="md-ellipsis">
      Restoration Timeline
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-restoration-progress" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring Restoration Progress
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deletion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deletion
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Depositing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Depositing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../depositing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bagging (SIP) Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../depositing/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bagging Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../depositing/guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deposit Guidelines
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Using Registry
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Using Registry
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Registry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intellectual Objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generic Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Premis Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/work_items/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Work Items
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/user_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/two_factor_auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Two-Factor Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/spot_tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Restoration Spot Tests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/reports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reports
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/rest_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registry REST API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/api_changes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Changes from Pharos
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../partner_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Partner Tools
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../old_partner_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Old Partner Tools
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact_us/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact Us
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#restoring-intellectual-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Restoring Intellectual Objects
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Restoring Intellectual Objects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes-on-restored-bags" class="md-nav__link">
    <span class="md-ellipsis">
      Notes on Restored Bags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restoring-individual-files" class="md-nav__link">
    <span class="md-ellipsis">
      Restoring Individual Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restoration-timeline" class="md-nav__link">
    <span class="md-ellipsis">
      Restoration Timeline
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-restoration-progress" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring Restoration Progress
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="restoration">Restoration</h1>
<h2 id="restoring-intellectual-objects">Restoring Intellectual Objects</h2>
<p>You can restore an intellectual object by navigating to the object detail page and clicking the <strong>Restore</strong> button.</p>
<p>You can find an object by going to the Object List page, clicking <strong>More Filters</strong>, and typing its identifier into the identifier search field.</p>
<p><img alt="List of intellectual objects" src="../../img/registry/ObjectsList.png" /></p>
<p>When you reach the object detail page, click the blue <strong>Restore</strong> button in the upper right corner of the page.</p>
<p><img alt="Top of object detail page" src="../../img/registry/ObjectDetailTop.png" /></p>
<p>After you click <strong>Restore Object</strong>, APTrust does the following:</p>
<ol>
<li>
<p>Creates a work item describing what is to be restored.</p>
</li>
<li>
<p>Copies all of the object's files into a new bag, verifying each file's checksums in the process.</p>
</li>
<li>
<p>Copies the latest version of the aptrust-info.txt and bag-info.txt files into the bag.</p>
</li>
<li>
<p>Writes a JSON file into the bag containing all of the PREMIS events APTrust recorded for that bag and its contents.</p>
</li>
<li>
<p>Adds md5 and sha256 manifests and tag manifests to the bag.</p>
</li>
<li>
<p>Copies the bag to your restoration bucket at <code>aptrust.restore.&lt;your.domain&gt;</code> in our production repo, or <code>aptrust.restore.test.&lt;your.domain&gt;</code> in our demo repo.</p>
</li>
<li>
<p>Marks the work item as complete.</p>
</li>
</ol>
<h3 id="notes-on-restored-bags">Notes on Restored Bags</h3>
<p>Because we rebuild bags for restoration, the bag you get back will not exactly match the bag you deposited, though we do guarantee that it contains all of the latest versions of all of the payload files.</p>
<p>If you submitted a bag that was packaged according to the BTR BagIt Profile, it will restored in BTR format. All other bags will be restored in APTrust format.</p>
<p>Note that, in addition to payload files, we preserve and restore the following tag files:</p>
<ul>
<li>aptrust-info.txt</li>
<li>bag-info.txt (Which will be modified on restoration. See below.)</li>
<li>Any other file outside the original bag's data directory that is not a manifest, tag manifest or fetch.txt file.</li>
</ul>
<p>We preserve the files above because they often contain important metadata.</p>
<p>Restored bags tend to differ in the following ways from your originally submitted bags:</p>
<ul>
<li>
<p>Restored APTrust bags have both sha256 and md5 manifests, while the bag you originally deposited typically has only one or the other.</p>
</li>
<li>
<p>Restored APTrust bags include md5 and sha256 tag manifests while bags submitted for ingest typically have neither.</p>
</li>
<li>
<p>Restored BTR bags include sha1, sha256, and sha512 manifests and tag manifests, even if the original bag included only one of these.</p>
</li>
<li>
<p>Restored bags include a modified bag-info.txt file. The modified file will include all of the tags and values included in the last ingested version of the bag, but:</p>
<ul>
<li>The bag will have a new Payload-Oxum.</li>
<li>The original Payload-Oxum will be included as Original-Payload-Oxum.</li>
<li>The bag will have a new Bagging-Date describing when APTrust's bag restorer rebuilt the bag.</li>
<li>The original Bagging-Date will be included as Original-Bagging-Date.</li>
<li>The bag will have a new Bag-Size describing the size of the restored bag.</li>
<li>The original Bag-Size will be included as Original-Bag-Size.</li>
<li>The bag will have a new Bagging-Software value saying that the bag was created by the APTrust restorer.</li>
<li>The original Bagging-Software name will included as Original-Bagging-Software.</li>
</ul>
</li>
<li>
<p>Restored bags include the <strong>latest</strong> version of each preserved file in the payload (data) directory.</p>
</li>
</ul>
<p>This last point is important. In some cases, you or someone at your institution may have deleted files from a bag, or uploaded newer versions of files in a bag after the bag was initially ingested. Deleted files cannot be restored, and the restored bag will always contain the last uploaded version of each file.</p>
<p>You can find information about updated and deleted files in the APTrust registry.</p>
<ol>
<li>Go to <a href="https://repo.aptrust.org/objects">https://repo.aptrust.org/objects</a></li>
<li>Search for the object you want to investigate. The easiest way to find an object is by its identifier.</li>
<li>Scroll down the object detail page to the list of <strong>Active Files</strong>.</li>
<li>Click the plus sign next to a file record to see its checksum history. If a newer version of a file was uploaded after initial ingest, this view will show you the old and new checksums, and the dates on which the checksum changed. You'll find more info, including a full list of Premis events, on the file detail page. Go to <a href="https://repo.aptrust.org/files">https://repo.aptrust.org/files</a> and enter paste in the file identifier.</li>
<li>To see a list of files deleted from the current object, click the <strong>show deleted files</strong> link on the top right side of the <strong>Active Files</strong> list.</li>
</ol>
<p>Because files may have been added to or deleted from a bag after its initial ingest, the Bag-Size and Payload-Oxum of the restored bag may differ from the Bag-Size and Payload-Oxum of any individual ingests. This is why we include both the current and original values in the restored version.</p>
<p>If you're curious about why the contents of a restored bag differ from the original, the object's PREMIS events should provide a detailed record of all additions and deletions. See <a href="../../registry/events/">PREMIS Events</a> for more info.</p>
<h2 id="restoring-individual-files">Restoring Individual Files</h2>
<p>You can restore individual files from the Intellectual Object page or from the Generic File Detail page. To restore from the Intellectual Object page:</p>
<ol>
<li>Locate the file you want to restore. If you don't see it in the list of files below the donut charts, you can search for it by identifier or you can click one of the arrows below the list to load another page of file results.</li>
<li>Click the plus sign next to the file you want to restore. This opens the file detail view.</li>
<li>Scroll down to the end of the shaded file detail view and click the <strong>Restore File</strong> button.</li>
</ol>
<p><img alt="Object file detail" src="../../img/registry/ObjectFileDetail.png" /></p>
<p>You can also restore files from the file detail page. To do so:</p>
<ol>
<li>Click <strong>More Options</strong> in the left nav.</li>
<li>Click <strong>Files</strong>.</li>
<li>Enter the file identifier in the search box and click <strong>Filter</strong>.</li>
<li>Click on the file you want to restore. This will open the file detail view.</li>
<li>Scroll to the bottom of the page and click <strong>Restore</strong>.</li>
</ol>
<p><img alt="File detail view - bottom" src="../../img/registry/FileDetailBottom.png" /></p>
<p>APTrust performs the following steps for file restoration:</p>
<ol>
<li>
<p>Creates a work item with the restoration request.</p>
</li>
<li>
<p>Verifies the file's checksum.</p>
</li>
<li>
<p>Copies the file to your receiving bucket at <code>aptrust.restore.&lt;your.domain&gt;</code> in our production repo, or <code>aptrust.restore.test.&lt;your.domain&gt;</code> in our demo repo.</p>
</li>
<li>
<p>Marks the work item as complete.</p>
</li>
</ol>
<h2 id="restoration-timeline">Restoration Timeline</h2>
<p>Restoring an item usually takes anywhere from 10 minutes to 24 hours, depending on the size of the object, where it is stored, and the number of work items the system has to process before it gets to yours.</p>
<ul>
<li>
<p>When restoring items from S3, the restoration process can usually begin immediately, since the files are immediately accessible. For items using Standard storage (as opposed to Glacier-Only), APTrust always restores from S3.</p>
</li>
<li>
<p>Restoring from Glacier takes longer than restoring from S3.</p>
<ul>
<li>When restoring from Glacier-only storage, it takes 4-5 hours to move files to a place where APTrust can copy and validate them.</li>
<li>When restoring from Glacier Deep Archive, it takes 12 hours to move files into a location where APTrust can copy and validate them.</li>
</ul>
</li>
<li>
<p>The size of the items being restored determines how long it will take to restore them. For example, a 1 MB file can often be restored in under a minute. A 1 TB bag may take 24 hours or more. Most of restoration time is taken up by copying the files and validating their md5 and sha256 checksums.</p>
</li>
<li>
<p>You can calculate overall restoration time as:</p>
<ul>
<li>S3: A product of file size: A few minutes for a few megabytes, or several hours for objects and files over 100 GB.</li>
<li>Glacier: 4-5 hours plus file size.</li>
<li>Glacier Deep Archive: 12 hours plus file size.</li>
</ul>
</li>
</ul>
<h2 id="monitoring-restoration-progress">Monitoring Restoration Progress</h2>
<p>You can check the progress of your restoration requests in Registry' Work Items list or the <a href="https://aptrust.github.io/registry/" target="_blank">Registry REST API</a>.</p>
<p><img alt="Registry work items list showing completed restoration requests" src="../../img/registry/RestorationWorkItems.png" /></p>
<p>When a restoration is complete, the file or bag will be waiting in your restoration bucket and APTrust will send an email to your institutional admins. The email includes information about the location of the restored file so you can download it.</p>
<div class="admonition tip">
<p class="admonition-title">Downloading Restored Items</p>
<p>You can use the apt_download command from our <a href="../../partner_tools/">Partner Tools</a> to download restored bags.</p>
</div>
<p>Restored items are automatically deleted from your restoration bucket after 14 days to avoid ongoing storage costs. (We do not delete the preservation copy, only the copy in your restoration bucket.)</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>