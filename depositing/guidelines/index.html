
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../tools/">
      
      
        <link rel="next" href="../../registry/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.2">
    
    
      
        <title>Deposit Guidelines - APTrust User Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d7758b05.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deposit-guidelines" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="APTrust User Guide" class="md-header__button md-logo" aria-label="APTrust User Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            APTrust User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deposit Guidelines
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/APTrust/userguide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="APTrust User Guide" class="md-nav__button md-logo" aria-label="APTrust User Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    APTrust User Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/APTrust/userguide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Preservation Actions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Preservation Actions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../preservation/ingest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ingest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../preservation/updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Updates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../preservation/restoration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Restoration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../preservation/deletion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deletion
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Depositing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Depositing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bagging (SIP) Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bagging Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Deposit Guidelines
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Deposit Guidelines
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#computing-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Computing Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Computing Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    <span class="md-ellipsis">
      CPU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking" class="md-nav__link">
    <span class="md-ellipsis">
      Networking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory" class="md-nav__link">
    <span class="md-ellipsis">
      Memory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bag-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      Bag Characteristics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bag Characteristics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bags-under-2tb" class="md-nav__link">
    <span class="md-ellipsis">
      Bags Under 2TB
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bags-should-contain-no-more-than-10000-files" class="md-nav__link">
    <span class="md-ellipsis">
      Bags Should Contain No More Than 10,000 Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-bags" class="md-nav__link">
    <span class="md-ellipsis">
      Valid Bags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#files-whose-path-and-name-are-over-1000-characters" class="md-nav__link">
    <span class="md-ellipsis">
      Files whose Path and Name are over 1,000 Characters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filenames-that-include-non-printing-characters" class="md-nav__link">
    <span class="md-ellipsis">
      Filenames that include Non-Printing Characters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deposit-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      Deposit Characteristics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deposit Characteristics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#batches-with-1000-or-fewer-bags" class="md-nav__link">
    <span class="md-ellipsis">
      Batches with 1,000 or Fewer Bags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrent-batches" class="md-nav__link">
    <span class="md-ellipsis">
      Concurrent Batches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-or-updated-content-only" class="md-nav__link">
    <span class="md-ellipsis">
      New or Updated Content Only
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Using Registry
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Using Registry
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Registry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intellectual Objects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generic Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Premis Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/work_items/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Work Items
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/user_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/two_factor_auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Two-Factor Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/spot_tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Restoration Spot Tests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/reports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/rest_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registry REST API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registry/api_changes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Changes from Pharos
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../partner_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Partner Tools
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../old_partner_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Old Partner Tools
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact_us/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact Us
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#computing-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Computing Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Computing Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    <span class="md-ellipsis">
      CPU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking" class="md-nav__link">
    <span class="md-ellipsis">
      Networking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory" class="md-nav__link">
    <span class="md-ellipsis">
      Memory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bag-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      Bag Characteristics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bag Characteristics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bags-under-2tb" class="md-nav__link">
    <span class="md-ellipsis">
      Bags Under 2TB
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bags-should-contain-no-more-than-10000-files" class="md-nav__link">
    <span class="md-ellipsis">
      Bags Should Contain No More Than 10,000 Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid-bags" class="md-nav__link">
    <span class="md-ellipsis">
      Valid Bags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#files-whose-path-and-name-are-over-1000-characters" class="md-nav__link">
    <span class="md-ellipsis">
      Files whose Path and Name are over 1,000 Characters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filenames-that-include-non-printing-characters" class="md-nav__link">
    <span class="md-ellipsis">
      Filenames that include Non-Printing Characters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deposit-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      Deposit Characteristics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deposit Characteristics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#batches-with-1000-or-fewer-bags" class="md-nav__link">
    <span class="md-ellipsis">
      Batches with 1,000 or Fewer Bags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrent-batches" class="md-nav__link">
    <span class="md-ellipsis">
      Concurrent Batches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-or-updated-content-only" class="md-nav__link">
    <span class="md-ellipsis">
      New or Updated Content Only
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="deposit-guidelines">Deposit Guidelines</h1>
<p>This document provides guidelines for bagging and depositing content to APTrust. Many deposited bags fall outside these characteristics; members have a lot of flexibility in how and what they bag and how they deposit. As our services mature, members have been sending more, differing bags at a higher frequency. The document describes typical bag characteristics so members can more easily identify unusual deposits and notify APTrust staff for manual scaling or additional monitoring if required. <strong>This document does not limit APTrust’s <a href="../">SIP specification</a>; members can deposit bags outside these characteristics, but we request advance notice when possible.</strong></p>
<ul>
<li>Bags are 2TB or smaller.  </li>
<li>Bags contain less than 10,000 files.  </li>
<li>Bags are validated before deposit.  </li>
<li>The full path, including filenames, of each file within a bag is less than 1,000 characters.  </li>
<li>Filenames within bags do not include non-printing characters in their path and are POSIX compliant.  </li>
<li>Deposits are organized into batches containing 1,000 or fewer bags.   </li>
<li>Previous deposit batches are fully ingested before sending the next batch.  </li>
<li>Deposits include only new or updated content.</li>
</ul>
<p>APTrust has designed its systems to be very efficient, using minimum resources, and able to scale rapidly on the preservation platform. For most use cases, the resources will scale automatically to the limit of the constraints placed to prevent runaway costs. However, in some use cases, bags with specific characteristics can rapidly exhaust those resources, and the resources must be manually scaled. This guidance provides use cases with context to help members scope their deposits, enabling us to mitigate risks and be good stewards of our natural resources. Over time, APTrust staff will seek to find better and more efficient methods to improve the ingest process, scale the system resources, and update this documentation accordingly. </p>
<h2 id="computing-resources">Computing Resources</h2>
<p>Preservation Services require a combination of CPU, networking, and memory across multiple steps to successfully ingest bags. Each step may need more or less of a particular resource based on the ingest stage and how the bag is packaged.</p>
<h3 id="cpu">CPU</h3>
<p>CPU provides processing capability across all resources and is most impacted by large files or bags with many small files. This is because of the amount of data to be processed and because CPU size drives container networking capabilities. It can also impact the database by pushing thousands of small bags simultaneously.</p>
<h3 id="networking">Networking</h3>
<p>Networking provides communication and data transfer between resources. Performance is most noticeable when copying files to S3 at different stages during ingest. Large bags with few or large files will be most impacted, as networking is constrained by container CPU size, and the time to copy can be extended due to intermittent throttling. </p>
<h3 id="memory">Memory</h3>
<p>Memory supports processing for all resources. Its most important role is as a high-performance database (Redis) handling record keeping at all processing stages through ingest. This is most impacted by bags with high numbers of files (10k+). </p>
<h2 id="bag-characteristics">Bag Characteristics</h2>
<h3 id="bags-under-2tb">Bags Under 2TB</h3>
<p>Bags no greater than 2TB are a good rule of thumb due to the CPU and network demands. The choices made by APTrust in resourcing CPU, networking, and preservation workers allow bags of many types to work steadily and in parallel through horizontal scaling and elasticity. By this, we mean that container numbers at a stage grow and shrink based on the demand.  A bag up to 2TB can take days to get through a single stage, and by scaling horizontally, other bags can be processed and ‘pass by’ the big bag.</p>
<p>However, these large bags take longer to process and are more likely to be exposed to different types of temporary disruption.  Containers may die, networking may eventually be throttled by AWS—slowing even more, and there may be enough network errors causing a bag to fail and require APTrust to restart them. Bags over 1TB are typical; such bags may take up to a week to ingest. Bags above 2TBs could take much longer without significant additional CPU resourcing.</p>
<p>Sometimes, smaller bags are assigned the same container as a big bag; when these smaller bags ride along with bigger bags, they also take much longer to ingest because they can only go as fast as the big bag can be processed. In other words, the large bag of one member may slow the ingestion of another member's small bag.</p>
<p>If several multi-TB bags need to be deposited, we can scale temporarily. Note that a bag has a hard limit of 5TB. </p>
<h3 id="bags-should-contain-no-more-than-10000-files">Bags Should Contain No More Than 10,000 Files</h3>
<p>Each ingested file will create a record in the Redis database (Elasticache on AWS). These records each use ~2KB of data, which will expand to ~10KB each during the record stage of ingest. Thus, bags with 10k files will start at about 20MB and grow to 100MB. Traditionally, the memory size for the Redis database was 3Gbs, meaning a bag with 10k files will use ~3%  memory but should progress steadily through the ingest process without any impact. Bags with 100k files would increase to 1GB at their peak, using 33% of all the memory available to ingest. The restoration of such bags has no significant impact on Redis and Elasticache.</p>
<p><strong>If you need to deposit several bags with high file counts, please contact APTrust staff to plan, as the Elasticache cluster can be scaled temporarily.</strong> </p>
<h3 id="valid-bags">Valid Bags</h3>
<p>APTrust provides tools (<a href="https://aptrust.org/documentation-page/dart-digital-archivists-resource-tool/">DART</a>, <a href="https://aptrust.org/documentation-page/partner-tools/">Partner Tools</a>) so members can pre-validate bags against the <a href="../">APTrust SIP specifications</a> before depositing. A valid BagIt bag may not necessarily be a valid APTrust BagIt bag. Pre-validating bags saves members time and saves APTrust from consuming unnecessary resources.</p>
<h3 id="files-whose-path-and-name-are-over-1000-characters">Files whose Path and Name are over 1,000 Characters</h3>
<p>Each file managed by APTrust’s preservation repository is tracked in multiple ways. When a file’s path and name are over 1,000 characters, our ability to record information may be limited.</p>
<h3 id="filenames-that-include-non-printing-characters">Filenames that include Non-Printing Characters</h3>
<p>Bags and the names of files they contain must be POSIX compliant. Filenames containing <a href="https://en.wikipedia.org/wiki/Non-printing_character_in_word_processors">non-printing characters</a> (e.g., nonbreaking space, tab, newline feed, carriage return) will fail to ingest and require manual intervention by the Depositor.</p>
<p>Filenames and paths can include:</p>
<ul>
<li>the uppercase letters (A-Z)  </li>
<li>the lowercase letters (a-z)  </li>
<li>the decimal digits (0-9)  </li>
<li>the dot (.), the hyphen (-) and the underscore (_)</li>
</ul>
<p>Filenames should not begin with a hyphen, although it may appear in any other position. Specifically, the following characters should not be used in file or directory names: <pre>! " ` ' ; / $ \&lt; &gt; ( ) | { } [ ] ~</pre></p>
<h2 id="deposit-characteristics">Deposit Characteristics</h2>
<h3 id="batches-with-1000-or-fewer-bags">Batches with 1,000 or Fewer Bags</h3>
<p>Batching deposits into approximately 1,000 bags maximizes system efficiency and supports APTrust’s commitment to green sustainability. This approach requires fewer computing resources, ensuring we are good stewards of our environment. When developing systems integrations, please avoid sending all objects at once.</p>
<h3 id="concurrent-batches">Concurrent Batches</h3>
<p>Because batches and their bags can vary, please wait until one batch is fully ingested before sending another. Oversized bags (bags with a small amount of large files and bags with a large amount of small files) take longer to ingest, sometimes up to a week or longer. </p>
<h3 id="new-or-updated-content-only">New or Updated Content Only</h3>
<p>Sending duplicate bags to APTrust consumes unnecessary resources. This incurs higher operating costs, causes other deposits to take longer to ingest, and creates a higher environmental impact (more power and water consumption). In the early days of APTrust, ingest volumes were low, and it was inconsequential to send an entire repository regularly, letting APTrust sort out what was new and what wasn’t. However, we no longer operate in this context.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f13b1293.min.js"></script>
      
    
  </body>
</html>